## 3장 HTTP 메시지

## 목차
[1. 메시지의 흐름](#메시지의-흐름)

[2. 메시지의 각 부분](#메시지의-각-부분)



## 메시지의 흐름
- HTTP 메시지는 `무언가를 담아 보내는 소포`와 같다.
- HTTP 메시지는 HTTP 애플리케이션 간에 주고받은 데이터의 구조화된 블록들이다.

#### 메시지는 원 서버 방향을 인바운드로 하여 송신된다.
- 인바운드 : 메시지가 원 서버로 향하는 것
- 아웃바운드 : 모든 처리가 끝난 뒤에 메시지가 사용자 에이전트로 돌아오는 것

#### 다운스트림으로 흐르는 메시지
- 요청 메시지냐 응답 메시지냐에 관계없이 모든 메시지는 `다운스트림으로 흐른다.`
- 메시지는 결코 업스트림으로 흐르지 않는다.

## 메시지의 각 부분
- 각 메시지는 **클라이언트로부터의 요청**이나 **서버로부터의 응답** 중 하나를 포함한다.
- 메시지 구조
  - `시작줄` : 이것이 어떤 메시지인지 서술
  - `헤더 블록` : 속성
  - `본문` : 데이터(아예 없을 수도 있다.)

#### 메시지 문법
- 모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류된다.
  - **요청 메시지** : 웹 서버에 어떤 동작을 요구한다.
  - **응답 메시지** : 요청의 결과를 클라이언트에게 돌려준다.
- 메시지 형식
  - `요청 메시지`
    - <메서드> <요청 URL> <버전>
    - <헤더>
    - <엔터티 본문>
  - `응답 메시지`
    - <버전> <상태 코드> <사유 구절>
    - <헤더>
    - <엔터티 본문>
- 메서드
  - 서버에게 무엇을 해야 하는지 말해준다.
  - `한 단어`로 되어있다. 
  - 예 : '`GET` /specials/saw-blade.gif HTTP/1.0' -> `메서드는 GET`이다.
  - 많이 쓰이는 HTTP 메서드
    - **GET** : 서버에서 어떤 문서를 `가져온다.`
    - **POST** : 서버가 처리해야할 데이터를 `보낸다`.
    - **PUT** : 서버에 요청메시지의 본문을 보내 `전체 수정한다`.
    - **PATCH** : 서버에 요청메시지의 본문을 보내 `부분 수정한다`.
    - **DELETE** : 서버에서 문서를 `제거한다.`
    - **HEAD** : 서버에서 어떤 문서에대해 `헤더만 가져온다.`
    - **TRACE** : 메시지가 프락시를 거쳐 `서버에 도달하는 과정을 추적한다.`
    - **OPTIONS** : 서버가 `어떤 메서드를 수행할 수 있는지 확인한다.`
- 요청 URL
  - 요청 대상이 되는 리소스를 지칭하는 완전한 URL / URL 경로 구성요소
- 버전
  - 이 메시지에서 사용 중인 HTTP의 버전
  - 형식 : HTTP/<메이저>,<마이너>
  - 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단
  - 대화 상대의 능력과 메시지의 형식에 대한 단서를 제공
  - 버전 번호는 어떤 애플리케이션이 지원하는 가장 높은 HTTP 버전을 가리킨다.
- 상태코드
  - 요청 중에 무엇이 일어났는지 설명하는 `세 자리의 숫자`
  - 상태의 일반적인 분류('성공', '에러' 등)을 나타낸다.
  - 많이 쓰이는 상태 코드들
    - `200` : OK - 성공!
    - `401` : Unauthorized - 사용자 이름과 비밀번호를 입력해야 한다.
    - `404` : Not Found - 서버는 요청한 URL에 해당하는 리소스를 찾지 못했다.
- 사유 구절(reason-phrase)
  - 숫자된 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구
  - 상태 코드 이후부터 줄바꿈 문자열까지
  - 오로지 사람에게 읽히기 위한 목적으로 존재
- 엔터티 본문
  - 모든 메시지가 엔터티 본문을 갖는 것은 아니다.
  - **헤더의 집합은 항상 빈 줄(그냥 CRLF)로 끝나야 함**